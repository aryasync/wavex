# API Examples

Simple examples showing how to use the Tsunami Fridge API.

## Items API

### Get All Items
```bash
GET /api/items
```

### Filter Items

#### By Category
```bash
GET /api/items?category=dairy
GET /api/items?category=produce
GET /api/items?category=meat
```

#### By Status
```bash
GET /api/items?status=pending
GET /api/items?status=confirmed
```

#### By Source
```bash
GET /api/items?source=receipt
GET /api/items?source=groceries
```

#### By Generated By
```bash
GET /api/items?generatedBy=manual
GET /api/items?generatedBy=ai
```

#### Expired Items
```bash
GET /api/items?expired=true
```

#### Expiring Items
```bash
GET /api/items?expiring=true
GET /api/items?expiring=true&expiringDays=5
```

### Combine Filters
```bash
# Get pending AI items
GET /api/items?status=pending&generatedBy=ai

# Get expired dairy items
GET /api/items?category=dairy&expired=true

# Get expiring items from receipts
GET /api/items?source=receipt&expiring=true
```

### Individual Item Operations
```bash
# Get specific item
GET /api/items/123

# Create new item
POST /api/items
Content-Type: application/json
{
  "name": "Milk",
  "category": "dairy",
  "expiryPeriod": 7
}

# Update item (only these fields can be updated)
PUT /api/items/123
Content-Type: application/json
{
  "status": "confirmed",
  "name": "Fresh Milk",
  "category": "dairy",
  "expiryPeriod": 10,
  "purchasedDate": "2024-01-15"
}

# Delete item
DELETE /api/items/123
```

### AI Image Analysis
```bash
POST /api/items/analyze-image
Content-Type: multipart/form-data
[image file]
```

## Response Format

All item responses include:
```json
{
  "id": "string",
  "name": "string",
  "category": "dairy|meat|produce|pantry|other",
  "expiryPeriod": 7,
  "expiryDate": "2024-01-15",
  "purchasedDate": "2024-01-08",
  "createdAt": 1704067200,
  "status": "pending|confirmed",
  "generatedBy": "manual|ai",
  "source": "receipt|groceries"
}
```

## Notifications API

### Get Notifications
```bash
# Get all notifications
GET /api/notifications

# Get unread notifications
GET /api/notifications?isRead=false

# Get specific notification types
GET /api/notifications?type=item_expiry_warning
GET /api/notifications?type=added_items
GET /api/notifications?type=item_expired

# Get specific notifications by IDs
GET /api/notifications?ids[]=notif-123&ids[]=notif-456
```

### Create Notification
```bash
POST /api/notifications
Content-Type: application/json
{
  "type": "item_expiry_warning",
  "message": "Milk expires in 2 days",
  "itemId": "item-456"
}
```

### Update Notification
```bash
# Update single notification
PUT /api/notifications/notif-123
Content-Type: application/json
{
  "isRead": true
}

# Mark all notifications as read
PUT /api/notifications/any-id
Content-Type: application/json
{
  "isRead": true,
  "readAll": true
}
```

### Delete Notifications
```bash
DELETE /api/notifications
Content-Type: application/json
{
  "ids": ["notif-123", "notif-456"]
}
```

### Get Statistics
```bash
GET /api/notifications/stats
```

## Valid Values

- **Categories**: `dairy`, `meat`, `produce`, `pantry`, `other`
- **Status**: `pending`, `confirmed`
- **Generated By**: `manual`, `ai`
- **Source**: `receipt`, `groceries`
- **Notification Types**: `item_expiry_warning`, `added_items`, `item_expired`
